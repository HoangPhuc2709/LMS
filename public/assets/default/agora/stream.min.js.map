{"version":3,"file":"/assets/default/agora/stream.min.js","mappings":"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","sources":["webpack:///./resources/js/parts/agora/stream.js"],"sourcesContent":["(function ($) {\n    \"use strict\";\n\n    var liveEndedHtml = `<div class=\"no-result default-no-result d-flex align-items-center justify-content-center flex-column w-100 h-100\">\n        <div class=\"no-result-logo\">\n            <img src=\"/assets/default/img/no-results/support.png\" alt=\"\">\n        </div>\n        <div class=\"d-flex align-items-center flex-column mt-30 text-center\">\n            <h2 class=\"text-dark-blue\">${liveEndedLang}</h2>\n            <p class=\"mt-5 text-center text-gray font-weight-500\">${redirectToPanelInAFewMomentLang}</p>\n        </div>\n    </div>`;\n\n    var featherIconsConf = {width: 20, height: 20};\n    let maximizeIcon = feather.icons['maximize-2'].toSvg(featherIconsConf);\n\n    // create Agora client\n    var client = AgoraRTC.createClient({\n        mode: \"live\",\n        codec: \"vp8\",\n    });\n\n    var localTracks = {\n        videoTrack: null,\n        audioTrack: null,\n        screenAudioTrack: null,\n        screenVideoTrack: null,\n        shareScreenActived: false\n    };\n\n    var remoteUsers = {};\n\n    // Agora client options\n    var options = {\n        appid: appId,\n        channel: channelName,\n        uid: null,\n        token: rtcToken,\n        role: 'host', //streamRole, // host or audience\n        audienceLatency: 2\n    };\n\n    var $remoteStreamPlayerEl = $('#remote-stream-player');\n    var $shareScreenButton = $('#shareScreen');\n\n    async function handleJoinOrCreateStream() {\n        try {\n\n            if (streamRole === \"audience\") {\n                client.on(\"user-published\", handleUserPublished);\n                client.on(\"user-unpublished\", handleUserUnpublished);\n                client.on(\"user-left\", handleHostEndLive);\n                client.on(\"user-joined\", handlePeerOnline);\n            }\n\n            client.setClientRole(options.role);\n\n            // join the channel\n            options.uid = await client.join(\n                options.appid,\n                options.channel,\n                options.token || null,\n                authUserId\n            );\n\n            if (streamRole === \"host\" || sessionStreamType === 'multiple') {\n                // create local audio and video tracks\n                localTracks.audioTrack = await AgoraRTC.createMicrophoneAudioTrack();\n                localTracks.videoTrack = await AgoraRTC.createCameraVideoTrack();\n\n                // play local video track\n                if (streamRole === \"audience\") {\n                    const playerHtml = await getRemoteUserCardHtml(authUserId);\n                    const player = $(playerHtml);\n\n                    $remoteStreamPlayerEl.append(player);\n                    localTracks.videoTrack.play(`remote-player-${authUserId}`);\n                } else {\n                    localTracks.videoTrack.play(\"stream-player\");\n                }\n\n                // publish local tracks to channel\n                await client.publish([localTracks.videoTrack, localTracks.audioTrack]);\n\n                if (streamRole === \"host\") {\n                    client.on(\"user-published\", handleUserPublished);\n                    client.on(\"user-unpublished\", handleUserUnpublished);\n                    client.on(\"user-joined\", handlePeerOnline);\n                    client.on(\"user-left\", handleAudienceLeft);\n                }\n\n\n                const startAt = (streamStartAt && streamStartAt > 0) ? (new Date().getTime() / 1000) - streamStartAt : 0;\n                handleTimer(startAt);\n\n                console.log(\"publish success\");\n\n                $(\".agora-stream-loading\").addClass('d-none');\n            }\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    handleJoinOrCreateStream();\n\n    function handlePeerOnline(evt) {\n        /*onsole.log('#################### Online')\n        console.log(evt)*/\n    }\n\n    window.getUserInfoCache = {};\n\n    window.getUserInfo = function (uid) {\n        return new Promise((resolve, reject) => {\n            if (getUserInfoCache && typeof getUserInfoCache[uid] !== \"undefined\") {\n                resolve(getUserInfoCache[uid])\n            } else {\n                $.get(`/panel/users/${uid}/getInfo`, function (result) {\n                    if (result && result.user) {\n                        getUserInfoCache[uid] = result.user;\n\n                        resolve(result.user)\n                    } else {\n                        reject(null)\n                    }\n                });\n            }\n        });\n    }\n\n    async function subscribe(user, mediaType) {\n\n        const uid = user.uid;\n\n        // subscribe to a remote user\n        await client.subscribe(user, mediaType);\n        console.log(\"subscribe success\");\n        if (mediaType === 'video') {\n            if (uid === hostUserId) {\n                user.videoTrack.play(\"stream-player\");\n            } else {\n                const playerHtml = await getRemoteUserCardHtml(uid);\n                const player = $(playerHtml);\n\n                $remoteStreamPlayerEl.append(player);\n                user.videoTrack.play(`remote-player-${uid}`);\n            }\n        }\n\n        if (mediaType === 'audio') {\n            user.audioTrack.play();\n        }\n\n        $(\".agora-stream-loading\").addClass('d-none');\n        $(\"#notStartedAlert\").removeClass('d-flex').addClass('d-none');\n\n        const startAt = (streamStartAt && streamStartAt > 0) ? (new Date().getTime() / 1000) - streamStartAt : 0;\n        handleTimer(startAt);\n    }\n\n    async function leave() {\n        for (let trackName in localTracks) {\n            const track = localTracks[trackName];\n\n            if (track) {\n                track.stop();\n                track.close();\n                localTracks[trackName] = undefined;\n            }\n        }\n\n        // remove remote users and player views\n\n        // leave the channel\n        await client.leave();\n\n        if (redirectAfterLeave) {\n            window.location = redirectAfterLeave;\n        }\n        console.log(\"client leaves channel success\");\n    }\n\n    function handleUserPublished(user, mediaType) {\n        const id = user.uid;\n        remoteUsers[id] = user;\n\n        subscribe(user, mediaType);\n    }\n\n    function handleUserUnpublished(user, mediaType) {\n        if (mediaType === 'video') {\n            const id = user.uid;\n            delete remoteUsers[id];\n            $(`#player-wrapper-${id}`).html('');\n        }\n    }\n\n    function handleHostEndLive(user, mediaType) {\n        const id = user.uid;\n\n        $(`#player-wrapper-${id}`).html(liveEndedHtml);\n\n        setTimeout(() => {\n            if (redirectAfterLeave) {\n                window.location = redirectAfterLeave;\n            }\n        }, 5000);\n    }\n\n    function handleAudienceLeft(user, mediaType) {\n        const id = user.uid;\n\n        $(`#remote-player-${id}`).remove();\n    }\n\n    async function handleShareScreen() {\n        if (!localTracks.shareScreenActived) {\n            let screenTrack;\n\n\n            // join a channel and create local tracks, we can use Promise.all to run them concurrently\n            [screenTrack] = await Promise.all([\n                AgoraRTC.createScreenVideoTrack({\n                    encoderConfig: {\n                        framerate: 30,\n                        height: 720,\n                        width: 1280\n                    }\n                }, \"auto\")\n            ]);\n\n            if (screenTrack instanceof Array) {\n                localTracks.screenVideoTrack = screenTrack[0];\n                localTracks.screenAudioTrack = screenTrack[1];\n            } else {\n                localTracks.screenVideoTrack = screenTrack;\n            }\n\n            // play local video track\n            if (localTracks.screenVideoTrack) {\n\n                localTracks.screenVideoTrack.play(\"stream-player\");\n                // publish local tracks to channel\n\n                await handleCameraEffect(true);\n\n                await client.publish([localTracks.screenVideoTrack, localTracks.audioTrack]);\n\n                localTracks.shareScreenActived = true;\n\n                localTracks.screenVideoTrack.on(\"track-ended\", () => {\n\n\n                    client.unpublish(localTracks.screenVideoTrack).then(() => {\n                        localTracks.screenVideoTrack.stop();\n                        localTracks.screenVideoTrack.close();\n\n                        localTracks.shareScreenActived = false;\n\n                        handleCameraEffect(false);\n                    });\n                });\n            }\n        }\n    }\n\n    async function handleEndShareScreen() {\n        if (localTracks.shareScreenActived) {\n\n            client.unpublish(localTracks.screenVideoTrack).then(() => {\n                localTracks.screenVideoTrack.stop();\n                localTracks.screenVideoTrack.close();\n\n                localTracks.shareScreenActived = false;\n\n                handleCameraEffect(false);\n            });\n\n        }\n    }\n\n    $('body').on('click', '#leave', function (e) {\n        const $this = $(this);\n        const sessionId = $this.attr('data-id');\n\n        $this.addClass('loadingbar primary').prop('disabled', true);\n\n        const path = '/panel/sessions/' + sessionId + '/endAgora';\n\n        $.get(path, function (result) {\n            if (result && result.code === 200) {\n                leave();\n            }\n        });\n    });\n\n    $('body').on('click', '#shareScreen', function (e) {\n        handleShareScreen();\n\n        $(this).removeClass('d-flex').addClass('d-none')\n        $('#endShareScreen').removeClass('d-none').addClass('d-flex')\n    });\n\n    $('body').on('click', '#endShareScreen', function (e) {\n        handleEndShareScreen();\n\n        $(this).removeClass('d-flex').addClass('d-none')\n        $('#shareScreen').removeClass('d-none').addClass('d-flex')\n    });\n\n    $('body').on('click', '#microphoneEffect', function (e) {\n        const $this = $(this);\n\n        let icon = feather.icons['mic'].toSvg(featherIconsConf);\n\n        if (localTracks.audioTrack) {\n            if ($this.hasClass('active')) {\n                $this.removeClass('active');\n                $this.addClass('disabled');\n\n                icon = feather.icons['mic-off'].toSvg(featherIconsConf);\n\n                client.unpublish(localTracks.audioTrack);\n            } else {\n                $this.addClass('active');\n                $this.removeClass('disabled');\n\n                client.publish(localTracks.audioTrack);\n            }\n        }\n\n        $this.find('.icon').html(icon);\n    });\n\n    $('body').on('click', '#cameraEffect', function (e) {\n        const $this = $(this);\n\n        if (!localTracks.shareScreenActived) {\n            handleCameraEffect($this.hasClass('active'));\n        }\n    });\n\n    async function handleCameraEffect(isActive = false) {\n        const $button = $('#cameraEffect');\n\n        let icon = feather.icons['video'].toSvg(featherIconsConf);\n\n        if (isActive) {\n            $button.removeClass('active');\n            $button.addClass('disabled');\n\n            icon = feather.icons['video-off'].toSvg(featherIconsConf);\n\n            if (localTracks.videoTrack) {\n                localTracks.videoTrack.stop();\n                localTracks.videoTrack.close();\n\n                client.unpublish(localTracks.videoTrack);\n            }\n        } else {\n            $button.addClass('active');\n            $button.removeClass('disabled');\n\n            localTracks.videoTrack = await AgoraRTC.createCameraVideoTrack();\n\n            if (authUserId === hostUserId) {\n                localTracks.videoTrack.play(\"stream-player\");\n            } else {\n                const playerHtml = await getRemoteUserCardHtml(authUserId);\n                const player = $(playerHtml);\n\n                $remoteStreamPlayerEl.append(player);\n                localTracks.videoTrack.play(`remote-player-${authUserId}`);\n            }\n\n            client.publish(localTracks.videoTrack);\n        }\n\n        $button.find('.icon').html(icon);\n    }\n\n    async function getRemoteUserCardHtml(uid) {\n        const userInfo = await getUserInfo(uid);\n\n        return `<div id=\"remote-player-${uid}\" class=\"remote-stream\">\n                    <span class=\"remote-stream-fullscreen\">${maximizeIcon}</span>\n                    ${userInfo ? `<span class=\"remote-stream-user-info\">${userInfo.full_name}</span>` : ''}\n                </div>`;\n    }\n\n    function handleTimer(startAt = 0) {\n        const streamTimer = $('#streamTimer');\n\n        const hoursLabel = streamTimer.find('.hours');\n        const minutesLabel = streamTimer.find('.minutes');\n        const secondsLabel = streamTimer.find('.seconds');\n\n        let totalSeconds = startAt;\n\n        setInterval(setTime, 1000);\n\n        function setTime() {\n            ++totalSeconds;\n            const seconds = pad(Math.floor((totalSeconds) % 60));\n            const minutes = pad(Math.floor((totalSeconds / 60) % 60));\n            const hours = pad(Math.floor((totalSeconds / (60 * 60)) % 24));\n\n            hoursLabel.html(hours);\n            minutesLabel.html(minutes);\n            secondsLabel.html(seconds);\n        }\n\n        function pad(val) {\n            var valString = val + \"\";\n            if (valString.length < 2) {\n                return \"0\" + valString;\n            } else {\n                return valString;\n            }\n        }\n    }\n\n    $('body').on('click', '#collapseBtn', function () {\n        const $tabs = $('.agora-tabs');\n\n        $tabs.toggleClass('show');\n    });\n\n    $('body').on('click', '.remote-stream-fullscreen', function () {\n        const $parent = $(this).closest('.remote-stream');\n\n        $parent.toggleClass('is-fullscreen');\n        $remoteStreamPlayerEl.toggleClass('is-fullscreen');\n    });\n\n    $('body').on('click', '#handleUsersJoin', function (e) {\n        const $this = $(this);\n        const notActive = $this.hasClass('dont-join-users');\n\n        if (notActive) {\n            $this.find('span').text(joinIsActiveLang);\n        } else {\n            $this.find('span').text(joiningIsDisabledLang);\n        }\n\n        $this.toggleClass('dont-join-users');\n\n        $this.prop('disabled', true);\n\n        $.get(`/panel/sessions/${sessionId}/toggleUsersJoinToAgora`, function (result) {\n            if (result) {\n                $.toast({\n                    heading: result.heading,\n                    text: result.text,\n                    bgColor: (result.icon === 'error') ? '#f63c3c' : '#43d477',\n                    textColor: 'white',\n                    hideAfter: 10000,\n                    position: 'bottom-right',\n                    icon: result.icon\n                });\n            }\n\n            $this.prop('disabled', false);\n        });\n    });\n})(jQuery);\n"],"names":["_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","_typeof","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","$","liveEndedHtml","concat","liveEndedLang","redirectToPanelInAFewMomentLang","featherIconsConf","width","height","maximizeIcon","feather","icons","toSvg","client","AgoraRTC","createClient","mode","codec","localTracks","videoTrack","audioTrack","screenAudioTrack","screenVideoTrack","shareScreenActived","remoteUsers","options","appid","appId","channel","channelName","uid","token","rtcToken","role","audienceLatency","$remoteStreamPlayerEl","_handleJoinOrCreateStream","_callee","playerHtml","player","_context","streamRole","on","handleUserPublished","handleUserUnpublished","handleHostEndLive","handlePeerOnline","setClientRole","join","authUserId","sessionStreamType","createMicrophoneAudioTrack","createCameraVideoTrack","getRemoteUserCardHtml","append","play","publish","handleAudienceLeft","handleTimer","streamStartAt","Date","getTime","console","log","addClass","t0","evt","_subscribe","_callee2","user","mediaType","_context2","subscribe","hostUserId","removeClass","_leave","_callee3","trackName","track","_context3","close","leave","redirectAfterLeave","window","location","id","_x","_x2","html","setTimeout","remove","_handleShareScreen","_callee4","screenTrack","_yield$Promise$all","_yield$Promise$all2","_context4","all","createScreenVideoTrack","encoderConfig","framerate","_slicedToArray","Array","handleCameraEffect","unpublish","_handleEndShareScreen","_callee5","_context5","_handleCameraEffect","_callee6","isActive","$button","icon","_args6","_context6","find","_x3","_getRemoteUserCardHtml","_callee7","userInfo","_context7","getUserInfo","full_name","startAt","streamTimer","hoursLabel","minutesLabel","secondsLabel","totalSeconds","pad","valString","setInterval","seconds","Math","floor","minutes","hours","handleJoinOrCreateStream","getUserInfoCache","get","e","$this","this","sessionId","attr","prop","path","code","handleShareScreen","handleEndShareScreen","hasClass","toggleClass","closest","text","joinIsActiveLang","joiningIsDisabledLang","toast","heading","bgColor","textColor","hideAfter","position","jQuery"],"sourceRoot":""}